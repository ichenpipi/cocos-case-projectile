System.register("chunks:///_virtual/TrajectoryDrawer.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./ProjectileMath.ts","./VectorUtil.ts"],(function(t){"use strict";var e,i,r,n,o,a,l,s,c,u,p,f,h,d,y,P;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,r=t.initializerDefineProperty,n=t.assertThisInitialized,o=t.defineProperty},function(t){a=t.cclegacy,l=t._decorator,s=t.Prefab,c=t.NodePool,u=t.Vec3,p=t.Quat,f=t.MeshRenderer,h=t.instantiate,d=t.Component},function(t){y=t.ProjectileMath},function(t){P=t.VectorUtil}],execute:function(){var m,v,b,g,w,D,j,M,z;a._RF.push({},"01c94oOie9EDZDjFFfzDe9j","TrajectoryDrawer",void 0);var x=l.ccclass,Q=l.property;t("TrajectoryDrawer",(m=x("TrajectoryDrawer"),v=Q({type:s,displayName:"轨迹点预制体"}),b=Q({displayName:"固定轨迹点数量"}),g=Q({visible:function(){return this.fixedQuantity},displayName:"轨迹点数量"}),m((j=e((D=function(t){function e(){for(var e,i=arguments.length,a=new Array(i),l=0;l<i;l++)a[l]=arguments[l];return e=t.call.apply(t,[this].concat(a))||this,r(n(e),"prefab",j,n(e)),r(n(e),"fixedQuantity",M,n(e)),r(n(e),"quantity",z,n(e)),o(n(e),"points",[]),o(n(e),"nodePool",new c),o(n(e),"tempVec3",new u),o(n(e),"tempQuat",new p),e}i(e,t);var a=e.prototype;return a.draw=function(t,e,i,r,n){var o,a=u.subtract(new u,e,t),l=P.projectOnPlane(a,u.UP),s=null!=n?n:l.length(),c=y.calculateTotalTime(s,i,r)/(o=this.fixedQuantity?Math.ceil(this.quantity):Math.max(8,Math.ceil(3*s)));this.producePoints(o);for(var f=l.normalize(),h=this.points,d=this.tempVec3,m=this.tempQuat,v=0;v<o;v++){var b=h[v];b.active=!0;var g=(v+1)*c,w=y.calculateDisplacementAtMoment(i,r,g),D=w.x,j=w.y,M=t.clone();M.add(d.set(f).multiplyScalar(D)),M.add(d.set(u.UP).multiplyScalar(j)),b.setWorldPosition(M);var z=p.fromViewUp(m,f,u.UP),x=-y.calculateAngleAtMoment(i,r,g,!0);p.rotateX(z,z,x),b.setWorldRotation(z)}},a.clear=function(){this.producePoints(0)},a.setColor=function(t){var e=this.prefab.data.getComponent(f);e||(e=this.prefab.data.getComponentInChildren(f)),e&&e.sharedMaterial.setProperty("mainColor",t)},a.producePoints=function(t){var e=this.points;if(e.length<t)for(var i=t-e.length;i>0;)e.push(this.getPoint()),i--;else if(e.length>t)for(var r=e.length-t;r>0;)this.putPoint(e.pop()),r--},a.getPoint=function(){var t;return(t=this.nodePool.size()>0?this.nodePool.get():h(this.prefab)).setParent(this.node),t},a.putPoint=function(t){this.nodePool.size()<50?this.nodePool.put(t):t.destroy()},e}(d)).prototype,"prefab",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=e(D.prototype,"fixedQuantity",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),z=e(D.prototype,"quantity",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 20}}),w=D))||w));a._RF.pop()}}}));

System.register("chunks:///_virtual/HUD_Options.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./Bullet.ts","./Cannon.ts","./Cursor.ts"],(function(n){"use strict";var e,t,o,i,r,a,c,l,s,g,u,d,h,p,f,E;return{setters:[function(n){e=n.applyDecoratedDescriptor,t=n.inheritsLoose,o=n.initializerDefineProperty,i=n.assertThisInitialized},function(n){r=n.cclegacy,a=n._decorator,c=n.Node,l=n.ToggleContainer,s=n.EditBox,g=n.Toggle,u=n.sys,d=n.Vec3,h=n.Component},function(n){p=n.Bullet},function(n){f=n.Cannon},function(n){E=n.Cursor}],execute:function(){var y,T,b,x,C,v,B,A,m,_,w,D,V,S,I,N,k,z,L,M,F,H,O;r._RF.push({},"1b4097H5s5E1YZkd5DJRPR9","HUD_Options",void 0);var P=a.ccclass,j=a.property;n("HUD_Options",(y=P("HUD_Options"),T=j({type:c}),b=j({type:c}),x=j({type:l}),C=j({type:s}),v=j({type:s}),B=j({type:g}),A=j({type:g}),m=j({type:g}),_=j({type:f}),w=j({type:E}),y((S=e((V=function(n){function e(){for(var e,t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];return e=n.call.apply(n,[this].concat(r))||this,o(i(e),"content",S,i(e)),o(i(e),"arrow",I,i(e)),o(i(e),"cannonModeToggleContainer",N,i(e)),o(i(e),"cannonAngleEditBox",k,i(e)),o(i(e),"cannonVelocityEditBox",z,i(e)),o(i(e),"cannonTrajectoryToggle",L,i(e)),o(i(e),"bulletExplodeToggle",M,i(e)),o(i(e),"cursorAdaptToggle",F,i(e)),o(i(e),"cannon",H,i(e)),o(i(e),"cursor",O,i(e)),e}t(e,n);var r=e.prototype;return r.onLoad=function(){this.init(),this.registerEvent()},r.onDestroy=function(){this.unregisterEvent()},r.registerEvent=function(){this.node.on(c.EventType.TOUCH_END,this.onTouchEnd,this)},r.unregisterEvent=function(){this.node.off(c.EventType.TOUCH_END,this.onTouchEnd,this)},r.onTouchEnd=function(n){this.changeState(!this.content.active)},r.init=function(){u.platform===u.Platform.MOBILE_BROWSER?this.node.setScale(new d(2,2,1)):this.node.setScale(new d(1,1,1)),this.changeState(!0);for(var n=f.Mode[this.cannon.mode],e=this.cannonModeToggleContainer.toggleItems,t=0;t<e.length;t++)e[t].node.name===n&&(e[t].isChecked=!0);this.cannonAngleEditBox.string=this.cannon.fixedPitchAngle.toString(),this.cannonAngleEditBox.placeholder=this.cannon.fixedPitchAngle.toString(),this.cannonVelocityEditBox.string=this.cannon.fixedVelocity.toString(),this.cannonVelocityEditBox.placeholder=this.cannon.fixedVelocity.toString(),this.cannonTrajectoryToggle.isChecked=this.cannon.showTrajectory,this.bulletExplodeToggle.isChecked=p.triggerExplode,this.cursorAdaptToggle.isChecked=this.cursor.adaptToSurface,this.changeState(!1)},r.changeState=function(n){this.content.active=n,this.arrow.angle=n?180:0},r.onCannonModeToggleChanged=function(n){switch(this.cannonModeToggleContainer.activeToggles()[0].node.name){case"FIXED_ALL":this.cannon.mode=f.Mode.FIXED_ALL,this.cannonAngleEditBox.node.parent.active=!0,this.cannonVelocityEditBox.node.parent.active=!0;break;case"FIXED_PITCH_ANGLE":this.cannon.mode=f.Mode.FIXED_PITCH_ANGLE,this.cannonAngleEditBox.node.parent.active=!0,this.cannonVelocityEditBox.node.parent.active=!1;break;case"FIXED_VELOCITY":this.cannon.mode=f.Mode.FIXED_VELOCITY,this.cannonAngleEditBox.node.parent.active=!1,this.cannonVelocityEditBox.node.parent.active=!0;break;case"UNFIXED":this.cannon.mode=f.Mode.UNFIXED,this.cannonAngleEditBox.node.parent.active=!1,this.cannonVelocityEditBox.node.parent.active=!1}},r.onCannonAngleEditBoxChanged=function(n){var e=Number(this.cannonAngleEditBox.string);isNaN(e)||e>0?this.cannonAngleEditBox.string=this.cannon.fixedPitchAngle.toString():this.cannon.fixedPitchAngle=e},r.onCannonVelocityEditBoxChanged=function(n){var e=Number(this.cannonVelocityEditBox.string);isNaN(e)||e<=0?this.cannonVelocityEditBox.string=this.cannon.fixedVelocity.toString():this.cannon.fixedVelocity=e},r.onCannonTrajectoryToggleChanged=function(n){var e=this.cannonTrajectoryToggle.isChecked;this.cannon.showTrajectory=e},r.onBulletExplodeToggleChanged=function(n){var e=this.bulletExplodeToggle.isChecked;p.triggerExplode=e},r.onCursorAdaptToggleChanged=function(n){var e=this.cursorAdaptToggle.isChecked;this.cursor.adaptToSurface=e},e}(h)).prototype,"content",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=e(V.prototype,"arrow",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=e(V.prototype,"cannonModeToggleContainer",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=e(V.prototype,"cannonAngleEditBox",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=e(V.prototype,"cannonVelocityEditBox",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=e(V.prototype,"cannonTrajectoryToggle",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=e(V.prototype,"bulletExplodeToggle",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=e(V.prototype,"cursorAdaptToggle",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=e(V.prototype,"cannon",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=e(V.prototype,"cursor",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=V))||D));r._RF.pop()}}}));

System.register("chunks:///_virtual/Cursor.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./VectorUtil.ts"],(function(e){"use strict";var t,r,o,i,a,n,u,c,s,p,l,f,d;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,o=e.initializerDefineProperty,i=e.assertThisInitialized,a=e.defineProperty,n=e.createClass},function(e){u=e.cclegacy,c=e._decorator,s=e.Node,p=e.Vec3,l=e.Quat,f=e.Component},function(e){d=e.VectorUtil}],execute:function(){var y,h,m,v,b,g,S;u._RF.push({},"3e784wgXb5FD6qDmQMPWi5v","Cursor",void 0);var T=c.ccclass,w=c.property;e("Cursor",(y=T("Cursor"),h=w({displayName:"适应目标表面"}),m=w({type:s,displayName:"参照节点（留空则参照世界原点）",visible:function(){return this.adaptToSurface}}),y((g=t((b=function(e){function t(){for(var t,r=arguments.length,n=new Array(r),u=0;u<r;u++)n[u]=arguments[u];return t=e.call.apply(e,[this].concat(n))||this,o(i(t),"_adaptToSurface",g,i(t)),o(i(t),"referNode",S,i(t)),a(i(t),"tempVec3",new p),a(i(t),"tempQuat",new l),t}return r(t,e),t.prototype.set=function(e,t){if(this.node.setWorldPosition(e),this.adaptToSurface&&t){var r,o,i=null!==(r=null===(o=this.referNode)||void 0===o?void 0:o.getWorldPosition())&&void 0!==r?r:p.ZERO,a=p.subtract(this.tempVec3,e,i),n=d.projectOnPlane(a,t).normalize(),u=l.fromViewUp(this.tempQuat,n,t);this.node.setWorldRotation(u)}},n(t,[{key:"adaptToSurface",get:function(){return this._adaptToSurface},set:function(e){this._adaptToSurface=e,e||this.node.setWorldRotation(l.fromEuler(new l,0,0,0))}}]),t}(f)).prototype,"_adaptToSurface",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),t(b.prototype,"adaptToSurface",[h],Object.getOwnPropertyDescriptor(b.prototype,"adaptToSurface"),b.prototype),S=t(b.prototype,"referNode",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=b))||v));u._RF.pop()}}}));

System.register("chunks:///_virtual/VectorUtil.ts",["cc"],(function(t){"use strict";var e,n;return{setters:[function(t){e=t.cclegacy,n=t.Vec3}],execute:function(){e._RF.push({},"59f54A7NwlOiY/boc9L5zON","VectorUtil",void 0);var r=180/Math.PI,c=new n;t("VectorUtil",function(){function t(){}return t.projectOnPlane=function(t,e){var r=n.dot(t,e),o=c.set(e).multiplyScalar(r);return n.subtract(new n,t,o)},t.signedAngle=function(e,c,o){var i=t.projectOnPlane(e,o),a=t.projectOnPlane(c,o),u=i.normalize(),l=a.normalize(),s=n.cross(new n,u,l).normalize(),f=n.dot(s,o);return Math.acos(n.dot(u,l))*f*r},t}());e._RF.pop()}}}));

System.register("chunks:///_virtual/HUD_Tips.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var t,i,n,r,o,s,l,a,c,p;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){o=e.cclegacy,s=e._decorator,l=e.Label,a=e.sys,c=e.Vec3,p=e.Component}],execute:function(){var u,f,h,y,d;o._RF.push({},"8d90ax9dDlNL5GpGoJYpjmB","HUD_Tips",void 0);var _=s.ccclass,b=s.property;e("HUD_Tips",(u=_("HUD_Tips"),f=b({type:l}),u((d=t((y=function(e){function t(){for(var t,i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return t=e.call.apply(e,[this].concat(o))||this,n(r(t),"label",d,r(t)),t}i(t,e);var o=t.prototype;return o.onLoad=function(){this.init()},o.init=function(){a.platform===a.Platform.MOBILE_BROWSER?(this.node.setScale(new c(1.5,1.5,1)),this.label.string="双指滑动可以调整摄像机距离"):(this.node.setScale(new c(1,1,1)),this.label.string="鼠标滚轮可以调整摄像机距离")},t}(p)).prototype,"label",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),h=y))||h));o._RF.pop()}}}));

System.register("chunks:///_virtual/MathUtil.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var n,e,u;return{setters:[function(t){n=t.createClass},function(t){e=t.cclegacy,u=t.game}],execute:function(){e._RF.push({},"ac60c1uuSNLz566NcMsAduq","MathUtil",void 0);var r=180/Math.PI,c=Math.PI/180;t("MathUtil",function(){function t(){}return t.radiansToDegrees=function(t){return t*r},t.degreesToRadians=function(t){return t*c},t.clamp=function(t,n,e){return t<n?n:t>e?e:t},t.clamp01=function(n){return t.clamp(n,0,1)},t.lerp=function(n,e,u){return n+(e-n)*t.clamp01(u)},t.step=function(t,n){return n<t?0:1},t.smoothStep=function(n,e,u){return e*(u=-2*(u=t.clamp01(u))*u*u+3*u*u)+n*(1-u)},t.smoothDamp=function(n,e,r,c,a,i){a=null!=a?a:Number.POSITIVE_INFINITY,i=null!=i?i:u.deltaTime;var o=2/(c=Math.max(1e-4,c)),l=o*i,s=1/(1+l+.47999998927116394*l*l+.23499999940395355*l*l*l),f=n-e,p=e,m=a*c,d=t.clamp(f,-m,m),g=(r+o*d)*i,h=(r-o*g)*s,M=(e=n-d)+(d+g)*s;return p-n>0==M>p&&(h=((M=p)-p)/i),{value:M,velocity:h}},n(t,null,[{key:"rad2Deg",get:function(){return r}},{key:"deg2Rad",get:function(){return c}}]),t}());e._RF.pop()}}}));

System.register("chunks:///_virtual/Cannon.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./ProjectileMath.ts","./VectorUtil.ts","./TrajectoryDrawer.ts"],(function(t){"use strict";var e,i,r,a,n,o,l,c,s,u,h,y,p,f,g,d,m,w,b;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,r=t.initializerDefineProperty,a=t.assertThisInitialized,n=t.defineProperty,o=t.createClass},function(t){l=t.cclegacy,c=t._decorator,s=t.Node,u=t.Prefab,h=t.Enum,y=t.Vec3,p=t.RigidBody,f=t.instantiate,g=t.director,d=t.Component},function(t){m=t.ProjectileMath},function(t){w=t.VectorUtil},function(t){b=t.TrajectoryDrawer}],execute:function(){var P,A,D,v,E,N,I,T,_,x,j,L,F,C,X,z,V,W,k,M,H,O,U;l._RF.push({},"af3dac0xL5BLrK8YABTwvI2","Cannon",void 0);var R,B=c.ccclass,S=c.property;!function(t){t[t.FIXED_ALL=1]="FIXED_ALL",t[t.FIXED_PITCH_ANGLE=2]="FIXED_PITCH_ANGLE",t[t.FIXED_VELOCITY=3]="FIXED_VELOCITY",t[t.UNFIXED=4]="UNFIXED"}(R||(R={}));t("Cannon",(P=B("Cannon"),A=S({type:s,displayName:"偏航轴节点",group:{name:"自身节点引用",id:"1"}}),D=S({type:s,displayName:"俯仰轴节点",group:{name:"自身节点引用",id:"1"}}),v=S({type:s,displayName:"炮弹发射点节点",group:{name:"自身节点引用",id:"1"}}),E=S({type:u,displayName:"炮弹预制体",group:{name:"炮弹",id:"2"}}),N=S({type:h(R),displayName:"模式",group:{name:"模式",id:"3"}}),I=S({displayName:"炮管的俯仰角",visible:function(){return this.mode===R.FIXED_PITCH_ANGLE||this.mode===R.FIXED_ALL},group:{name:"模式",id:"3"}}),T=S({displayName:"炮弹的初速度",visible:function(){return this.mode===R.FIXED_VELOCITY||this.mode===R.FIXED_ALL},group:{name:"模式",id:"3"}}),_=S({displayName:"使用小俯仰角",visible:function(){return this.mode===R.FIXED_VELOCITY},group:{name:"模式",id:"3"}}),x=S({type:b,displayName:"弹道绘制器",group:{name:"弹道",id:"4"}}),j=S({displayName:"绘制弹道",visible:function(){return null!=this.trajectoryDrawer},group:{name:"弹道",id:"4"}}),P((C=e((F=function(t){function e(){for(var e,i=arguments.length,o=new Array(i),l=0;l<i;l++)o[l]=arguments[l];return e=t.call.apply(t,[this].concat(o))||this,r(a(e),"yawAxis",C,a(e)),r(a(e),"pitchAxis",X,a(e)),r(a(e),"firePoint",z,a(e)),r(a(e),"bulletPrefab",V,a(e)),r(a(e),"mode",W,a(e)),r(a(e),"fixedPitchAngle",k,a(e)),r(a(e),"fixedVelocity",M,a(e)),r(a(e),"useSmallPitchAngle",H,a(e)),r(a(e),"trajectoryDrawer",O,a(e)),r(a(e),"_showTrajectory",U,a(e)),n(a(e),"velocity",0),n(a(e),"curTargetPos",new y(0,-2,2)),e}i(e,t);var l=e.prototype;return l.rotateTo=function(t,e){this.pitch=t,this.yaw=e},l.aim=function(t){this.curTargetPos.set(t);var e=y.subtract(new y,t,this.mainPosition),i=-w.signedAngle(e,this.mainForward,this.mainUp),r=NaN,a=NaN,n=!1;switch(this.mode){case R.FIXED_ALL:r=this.fixedPitchAngle,a=this.fixedVelocity,n=!0;break;case R.FIXED_PITCH_ANGLE:r=this.fixedPitchAngle,a=this.calculateVelocity(t,-r);break;case R.FIXED_VELOCITY:a=this.fixedVelocity;var o=this.calculateAngle(t,a),l=o.angle1,c=o.angle2;isNaN(l)||isNaN(c)?n=!0:r=this.useSmallPitchAngle?-Math.min(l,c):-Math.max(l,c);break;case R.UNFIXED:var s=this.calculateWithMaxHeight(t);r=-s.angle,a=s.velocity}isNaN(r)&&(r=this.pitch),this.rotateTo(r,i),isNaN(a)||(this.velocity=a),this.showTrajectory&&this.trajectoryDrawer&&this.drawTrajectory(t,-this.pitch,this.velocity,n)},l.fire=function(t){t&&this.aim(t),this.shoot(this.velocity)},l.shoot=function(t){var e=this.generateBullet(),i=e.getComponent(p),r=e.forward.negative();r.multiplyScalar(t),i.setLinearVelocity(r)},l.drawTrajectory=function(t,e,i,r){var a=this.firePoint.getWorldPosition();if(r){var n=m.calculateDisplacementAtMoment(e,i,2).x;this.trajectoryDrawer.draw(a,t,e,i,n)}else this.trajectoryDrawer.draw(a,t,e,i)},l.generateBullet=function(){var t=f(this.bulletPrefab);return g.getScene().addChild(t),t.setWorldPosition(this.firePoint.getWorldPosition()),t.setWorldRotation(this.firePoint.getWorldRotation()),t},l.calculateDisplacement=function(t){var e=this.firePoint.getWorldPosition(),i=y.subtract(new y,t,e),r=i.y;return{horizontal:w.projectOnPlane(i,y.UP).length(),vertical:r}},l.calculateVelocity=function(t,e){var i=this.calculateDisplacement(t),r=i.horizontal,a=i.vertical;return m.calculateWithAngle(r,a,e)},l.calculateAngle=function(t,e){var i=this.calculateDisplacement(t),r=i.horizontal,a=i.vertical;return m.calculateWithVelocity(r,a,e)},l.calculateWithMaxHeight=function(t){var e=this.calculateDisplacement(t),i=e.horizontal,r=e.vertical,a=Math.max(.5,r+.3*i);return m.calculateWithMaxHeight(i,r,a)},o(e,[{key:"showTrajectory",get:function(){return this._showTrajectory},set:function(t){this._showTrajectory=t,this.trajectoryDrawer&&(t?this.curTargetPos&&this.aim(this.curTargetPos):this.trajectoryDrawer.clear())}},{key:"pitch",get:function(){return this.pitchAxis.eulerAngles.x},set:function(t){this.pitchAxis.setRotationFromEuler(t,0,0)}},{key:"yaw",get:function(){return this.yawAxis.eulerAngles.y},set:function(t){this.yawAxis.setRotationFromEuler(0,t,0)}},{key:"mainPosition",get:function(){return this.yawAxis.getWorldPosition()}},{key:"mainForward",get:function(){return this.yawAxis.parent.forward.negative()}},{key:"mainUp",get:function(){return this.yawAxis.up}}],[{key:"Mode",get:function(){return R}}]),e}(d)).prototype,"yawAxis",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),X=e(F.prototype,"pitchAxis",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=e(F.prototype,"firePoint",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V=e(F.prototype,"bulletPrefab",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),W=e(F.prototype,"mode",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return R.FIXED_PITCH_ANGLE}}),k=e(F.prototype,"fixedPitchAngle",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return-45}}),M=e(F.prototype,"fixedVelocity",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 5}}),H=e(F.prototype,"useSmallPitchAngle",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),O=e(F.prototype,"trajectoryDrawer",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=e(F.prototype,"_showTrajectory",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),e(F.prototype,"showTrajectory",[j],Object.getOwnPropertyDescriptor(F.prototype,"showTrajectory"),F.prototype),L=F))||L));l._RF.pop()}}}));

System.register("chunks:///_virtual/EffectManger.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var t,n,r,i,o,a,c,s,l,u,f,p;return{setters:[function(e){t=e.defineProperty,n=e.applyDecoratedDescriptor,r=e.inheritsLoose,i=e.createClass,o=e.initializerDefineProperty,a=e.assertThisInitialized},function(e){c=e.cclegacy,s=e._decorator,l=e.Prefab,u=e.instantiate,f=e.director,p=e.Component}],execute:function(){var y,d,h,b,g,_,v,E;c._RF.push({},"b1385xAyyhPB6TsvEBSW4MY","EffectManger",void 0);var P=s.ccclass,x=s.property,M=s.executionOrder;e("EffectManger",(y=P("EffectManger"),d=M(-1),h=x({type:l,displayName:"炮弹爆炸效果预制体"}),y(b=d((E=v=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return t=e.call.apply(e,[this].concat(r))||this,o(a(t),"bulletExplosionPrefab",_,a(t)),t}r(t,e);var n=t.prototype;return n.onLoad=function(){t._instance=this},n.onDestroy=function(){t._instance===this&&(t._instance=null)},n.playBulletExplosion=function(e){var t=u(this.bulletExplosionPrefab);f.getScene().addChild(t),t.setWorldPosition(e),this.scheduleOnce((function(){return t.destroy()}),1)},i(t,null,[{key:"instance",get:function(){return this._instance}}]),t}(p),t(v,"_instance",null),_=n((g=E).prototype,"bulletExplosionPrefab",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=g))||b)||b));c._RF.pop()}}}));

System.register("chunks:///_virtual/Bullet.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./EffectManger.ts"],(function(t){"use strict";var e,o,i,n,r,l,s,c;return{setters:[function(t){e=t.defineProperty,o=t.inheritsLoose,i=t.assertThisInitialized},function(t){n=t.cclegacy,r=t._decorator,l=t.Collider,s=t.Component},function(t){c=t.EffectManger}],execute:function(){var u,a,g;n._RF.push({},"be613BiyadMYYQcjSzr/JtE","Bullet",void 0);var d=r.ccclass;r.property,t("Bullet",d("Bullet")((g=a=function(t){function n(){for(var o,n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return o=t.call.apply(t,[this].concat(r))||this,e(i(o),"collider",null),e(i(o),"triggered",!1),o}o(n,t);var r=n.prototype;return r.onLoad=function(){this.collider=this.getComponent(l),this.collider.on("onCollisionEnter",this.onCollisionEnter,this)},r.onDestroy=function(){this.collider.off("onCollisionEnter",this.onCollisionEnter,this)},r.onCollisionEnter=function(t){this.triggered||(this.triggered=!0,n.triggerExplode&&this.trigger())},r.trigger=function(){c.instance.playBulletExplosion(this.node.getWorldPosition()),this.node.destroy()},n}(s),e(a,"triggerExplode",!1),u=g))||u);n._RF.pop()}}}));

System.register("chunks:///_virtual/ProjectileMath.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var a,n,e;return{setters:[function(t){a=t.createClass},function(t){n=t.cclegacy,e=t.PhysicsSystem}],execute:function(){n._RF.push({},"cc22b8mSmVF0q6lb6/6cNhf","ProjectileMath",void 0);var r=180/Math.PI,c=Math.PI/180;t("ProjectileMath",function(){function t(){}return t.calculateTotalTime=function(t,a,n){var e=a*c;return t/(n*Math.cos(e))},t.calculateAngleAtMoment=function(a,n,e,i){void 0===i&&(i=!1);var h=t.gravity,l=a*c,o=n*Math.cos(l),u=n*Math.sin(l)-h*e,M=Math.atan(u/o);return i?M:M*r},t.calculateDisplacementAtMoment=function(a,n,e){var r=t.gravity,i=a*c;return{x:n*Math.cos(i)*e,y:n*Math.sin(i)*e-.5*r*Math.pow(e,2)}},t.calculateWithAngle=function(t,a,n){var r=Math.abs(e.instance.gravity.y),i=n*c,h=2*t*Math.sin(i)*Math.cos(i)-2*a*Math.pow(Math.cos(i),2);return h<0?NaN:Math.sqrt(r*Math.pow(t,2)/h)},t.calculateWithVelocity=function(a,n,e){var c=t.gravity,i=e,h=Math.pow(i,2),l=Math.pow(i,4)-c*(c*Math.pow(a,2)+2*n*h);if(l<0)return{angle1:NaN,angle2:NaN};var o=Math.sqrt(l),u=Math.atan((-h+o)/(-c*a)),M=Math.atan((-h-o)/(-c*a));return{angle1:u*r,angle2:M*r}},t.calculateWithMaxHeight=function(a,n,e){var c=t.gravity,i=e;if(i<0||i-n<0)return{angle:NaN,velocity:NaN,time:NaN};var h=Math.sqrt(2*c*i),l=Math.sqrt(2*c*(i-n)),o=(-h+l)/-c,u=(-h-l)/-c,M=Math.max(o,u),s=Math.atan(h*M/a),v=h/Math.sin(s);return{angle:s*r,velocity:v,time:M}},a(t,null,[{key:"gravity",get:function(){return Math.abs(e.instance.gravity.y)}}]),t}());n._RF.pop()}}}));

System.register("chunks:///_virtual/GameController.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./Cannon.ts","./Cursor.ts"],(function(t){"use strict";var n,e,o,i,r,s,a,c,u,h,l,f,p,y;return{setters:[function(t){n=t.applyDecoratedDescriptor,e=t.inheritsLoose,o=t.initializerDefineProperty,i=t.assertThisInitialized},function(t){r=t.cclegacy,s=t._decorator,a=t.Camera,c=t.sys,u=t.input,h=t.Input,l=t.PhysicsSystem,f=t.Component},function(t){p=t.Cannon},function(t){y=t.Cursor}],execute:function(){var E,T,v,m,M,g,O,S,_;r._RF.push({},"d2389mgGgZJDLpcE79+q1I8","GameController",void 0);var C=s.ccclass,U=s.property;t("GameController",(E=C("GameController"),T=U({type:a,displayName:"摄像机"}),v=U({type:p,displayName:"大炮"}),m=U({type:y,displayName:"光标"}),E((O=n((g=function(t){function n(){for(var n,e=arguments.length,r=new Array(e),s=0;s<e;s++)r[s]=arguments[s];return n=t.call.apply(t,[this].concat(r))||this,o(i(n),"camera",O,i(n)),o(i(n),"cannon",S,i(n)),o(i(n),"cursor",_,i(n)),n}e(n,t);var r=n.prototype;return r.onLoad=function(){this.registerEvent()},r.onDestroy=function(){this.unregisterEvent()},r.registerEvent=function(){c.platform===c.Platform.MOBILE_BROWSER?(u.on(h.EventType.TOUCH_START,this.onTouchStart,this),u.on(h.EventType.TOUCH_MOVE,this.onTouchMove,this),u.on(h.EventType.TOUCH_END,this.onTouchEnd,this)):(u.on(h.EventType.MOUSE_DOWN,this.onMouseDown,this),u.on(h.EventType.MOUSE_MOVE,this.onMouseMove,this),u.on(h.EventType.MOUSE_UP,this.onMouseUp,this))},r.unregisterEvent=function(){c.platform===c.Platform.MOBILE_BROWSER?(u.off(h.EventType.TOUCH_START,this.onTouchStart,this),u.off(h.EventType.TOUCH_MOVE,this.onTouchMove,this),u.off(h.EventType.TOUCH_END,this.onTouchEnd,this)):(u.off(h.EventType.MOUSE_DOWN,this.onMouseDown,this),u.off(h.EventType.MOUSE_MOVE,this.onMouseMove,this),u.off(h.EventType.MOUSE_UP,this.onMouseUp,this))},r.onTouchStart=function(t){t.getAllTouches().length>1||this.aimWithScreenPos(t.getLocation())},r.onTouchMove=function(t){t.getAllTouches().length>1||this.aimWithScreenPos(t.getLocation())},r.onTouchEnd=function(t){t.getAllTouches().length>0||(this.aimWithScreenPos(t.getLocation()),this.fire())},r.onMouseDown=function(t){this.aimWithScreenPos(t.getLocation())},r.onMouseMove=function(t){this.aimWithScreenPos(t.getLocation())},r.onMouseUp=function(t){this.fire()},r.aimWithScreenPos=function(t){var n=this.camera.screenPointToRay(t.x,t.y);if(l.instance.raycastClosest(n)){var e=l.instance.raycastClosestResult,o=e.hitPoint,i=e.hitNormal;this.cannon.aim(o),this.cursor.set(o,i)}},r.fire=function(){this.cannon.fire()},n}(f)).prototype,"camera",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=n(g.prototype,"cannon",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=n(g.prototype,"cursor",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=g))||M));r._RF.pop()}}}));

System.register("chunks:///_virtual/CameraController.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./MathUtil.ts"],(function(t){"use strict";var e,i,n,o,r,a,s,l,u,c,h,p,m,f,y;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,o=t.assertThisInitialized,r=t.defineProperty},function(t){a=t.cclegacy,s=t._decorator,l=t.Node,u=t.Vec3,c=t.sys,h=t.input,p=t.Input,m=t.Vec2,f=t.Component},function(t){y=t.MathUtil}],execute:function(){var g,v,d,T,E,b,N,V,D,M,C,O,S,_,W,z,L;a._RF.push({},"ee594FJk7xOGo9n2U0Qsd54","CameraController",void 0);var P=s.ccclass,w=s.property;t("CameraController",(g=P("CameraController"),v=w({type:l,displayName:"摄像机节点"}),d=w({type:l,displayName:"目标节点"}),T=w({displayName:"最小距离"}),E=w({displayName:"最大距离"}),b=w({displayName:"平滑时间"}),N=w({displayName:"鼠标滚轮敏感度"}),V=w({displayName:"双指触摸敏感度"}),g((C=e((M=function(t){function e(){for(var e,i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return e=t.call.apply(t,[this].concat(a))||this,n(o(e),"cameraNode",C,o(e)),n(o(e),"targetNode",O,o(e)),n(o(e),"minDistance",S,o(e)),n(o(e),"maxDistance",_,o(e)),n(o(e),"smoothTime",W,o(e)),n(o(e),"mouseSensitivity",z,o(e)),n(o(e),"touchSensitivity",L,o(e)),r(o(e),"currentValue",0),r(o(e),"targetValue",0),r(o(e),"currentVelocity",0),r(o(e),"lastTouchesDistance",null),r(o(e),"tempVec3",new u),e}i(e,t);var a=e.prototype;return a.onLoad=function(){this.init(),this.registerEvent()},a.onDestroy=function(){this.unregisterEvent()},a.registerEvent=function(){c.platform===c.Platform.MOBILE_BROWSER?(h.on(p.EventType.TOUCH_MOVE,this.onTouchMove,this),h.on(p.EventType.TOUCH_END,this.onTouchEnd,this)):h.on(p.EventType.MOUSE_WHEEL,this.onMouseWheel,this)},a.unregisterEvent=function(){c.platform===c.Platform.MOBILE_BROWSER?(h.off(p.EventType.TOUCH_MOVE,this.onTouchMove,this),h.off(p.EventType.TOUCH_END,this.onTouchEnd,this)):h.off(p.EventType.MOUSE_WHEEL,this.onMouseWheel,this)},a.init=function(){var t;this.cameraNode.lookAt(this.targetNode.getWorldPosition()),t=c.platform===c.Platform.MOBILE_BROWSER?15:8,this.setTarget(t)},a.onMouseWheel=function(t){var e=t.getScrollY()*this.mouseSensitivity;this.setTarget(this.targetValue-e)},a.onTouchMove=function(t){var e=t.getAllTouches();if(!(e.length<2)){var i=m.distance(e[0].getLocation(),e[1].getLocation());if(null!==this.lastTouchesDistance){var n=(i-this.lastTouchesDistance)*this.touchSensitivity;this.setTarget(this.targetValue-n)}this.lastTouchesDistance=i}},a.onTouchEnd=function(t){this.lastTouchesDistance=null},a.update=function(t){if(this.currentValue!==this.targetValue){var e=y.smoothDamp(this.currentValue,this.targetValue,this.currentVelocity,this.smoothTime);this.currentVelocity=e.velocity,this.setCurrent(e.value)}},a.setCurrent=function(t){var e=u.subtract(this.tempVec3,this.cameraNode.getWorldPosition(),this.targetNode.getWorldPosition());e.normalize().multiplyScalar(t),this.cameraNode.setWorldPosition(e),this.currentValue=t},a.setTarget=function(t){this.targetValue=y.clamp(t,this.minDistance,this.maxDistance)},e}(f)).prototype,"cameraNode",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=e(M.prototype,"targetNode",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=e(M.prototype,"minDistance",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 5}}),_=e(M.prototype,"maxDistance",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 50}}),W=e(M.prototype,"smoothTime",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.1}}),z=e(M.prototype,"mouseSensitivity",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.05}}),L=e(M.prototype,"touchSensitivity",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.05}}),D=M))||D));a._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./ProjectileMath.ts","./VectorUtil.ts","./TrajectoryDrawer.ts","./EffectManger.ts","./Bullet.ts","./Cannon.ts","./Cursor.ts","./HUD_Options.ts","./HUD_Tips.ts","./MathUtil.ts","./GameController.ts","./CameraController.ts"],(function(){"use strict";return{setters:[null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});